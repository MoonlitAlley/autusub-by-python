
##方案目标：
为给定路径下所有文件夹中的.mp4格式视频生成.Srt格式字幕文件
##执行步骤：
因为执行时间不同步，所以全过程分为两步：
第一步：收集所有的.mp4格式的视频路径信息，使用ffmpeg从视频中提取出.m4a格式的音频文件，提取的音频文件将存放于缓存目录，带字幕转换完成之后删除。
(若提取过程中断，脚本不会重复执行已经提取过的文件，除非生成文件被误删除。）
(每提取一个音频文件都直接移动到新创建的临时音频文件夹中)
(单个文件（≤500Mb）执行时间约为3s)

第二步：使用autosub自动调用google speech API根据.m4a格式音频文件生成对应的.srt格式的字幕文件。
(若生成过程中断，脚本不会重复执行已经生成过的音频文件，除非生成文件被误删除)
(每生成一条字幕文件都直接移动到源视频目录的位置，并删除对应的音频文件)
(所有字幕文件生成之后，删除第一步创建的临时文件，推荐手动删除)
(执行时间视网络情况而定)
(仅支持英文字幕，使用翻译功能需要付费获得Google Speech API Key）


##结果使用：
使用QQ影音等其他播放工具打开视频并拖入字幕文件即可

##运行环境：（假定所需环境可以运行）
1、需要安装ffmpeg（脚本测试版本为ffmpeg4.1）
2、需要安装python（脚本测试环境为python2.7.14）
3、需要安装autosub
a)Linux环境按正常步骤执行安装
b)Windows环境当无法正常使用时可安装此版本
i.(https://github.com/BingLingGroup/autosub.git)
ii.Download之后切换到setup.py所在目录，执行pip install .
4、需要稳定连接google服务器（执行第二步过程）
a)你可能需要使用以下命令来更改当前命令行的http proxy
i.set http_proxy=http://127.0.0.1:1080
ii.set http_proxy=https://127.0.0.1:1080